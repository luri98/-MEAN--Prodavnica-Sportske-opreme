<nav class="flex bg-teal-500 shadow-md">
    <div class="w-full max-w-7xl mx-auto flex justify-between px-4 py-2">
        <div class="flex items-center">
            <a href="/"><img class="size-12 rounded-full" src="/assets/imgs/logo.jpg" alt=""></a>
            <div class="hidden md:flex items-center space-x-5 lg:space-x-8 ml-6 lg:ml-10">
                <a 
                    class="flex items-center space-x-2 text-white font-semibold hover:text-slate-900 transition-all duration-200"
                    [href]="route.href"
                    *ngFor="let route of routes">
                    <span [innerHTML]="sanitizeSvg(route?.svg)"></span>
                    <span>{{route.name}}</span>
                </a>
            </div>
        </div>
        <div class="flex items-center space-x-4 md:space-x-10 tracking-wide text-white">
            <a class="hidden md:flex items-center space-x-2" href="/" 
                *ngIf="!user; else loggedInTemplate">
                <span>Prijava</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                    <path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                </svg>                      
            </a>
            <ng-template #loggedInTemplate>
                <div class="hidden md:flex items-center space-x-4">
                    <a class="flex items-center space-x-2 group group" href="/prijava">
                        <svg class="size-6 group-hover:text-slate-900 transition-all duration-200" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                          </svg>
                        <div clas="flex flex-col">
                            <span class="block font-semibold truncate max-w-48 group-hover:text-slate-900 transition-all duration-200">{{user.name}}</span>
                            <span class="block text-sm truncate max-w-48 group-hover:text-slate-900 transition-all duration-200">{{user.email}}</span>
                        </div>
                    </a>
                    <button>
                        <svg class="text-white h-6 w-6 hover:text-slate-900 transition-all duration-200" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19.8349 17.1563H18.2284C18.1187 17.1563 18.0159 17.2055 17.9473 17.2922C17.7874 17.4914 17.616 17.6836 17.4355 17.8664C16.6971 18.6245 15.8225 19.2286 14.8601 19.6453C13.863 20.0773 12.7913 20.2989 11.7089 20.2969C10.6143 20.2969 9.55396 20.0766 8.55764 19.6453C7.59519 19.2286 6.72061 18.6245 5.98227 17.8664C5.2426 17.1109 4.6528 16.2155 4.24555 15.2297C3.82279 14.2078 3.61027 13.1227 3.61027 12C3.61027 10.8773 3.82508 9.79219 4.24555 8.77032C4.65231 7.7836 5.2373 6.89532 5.98227 6.1336C6.72723 5.37188 7.5933 4.77188 8.55764 4.35469C9.55396 3.92344 10.6143 3.70313 11.7089 3.70313C12.8035 3.70313 13.8638 3.9211 14.8601 4.35469C15.8244 4.77188 16.6905 5.37188 17.4355 6.1336C17.616 6.31876 17.7851 6.51094 17.9473 6.70782C18.0159 6.79454 18.121 6.84375 18.2284 6.84375H19.8349C19.9788 6.84375 20.068 6.67969 19.988 6.55547C18.2353 3.76172 15.1686 1.9125 11.6837 1.92188C6.2085 1.93594 1.81871 6.49454 1.87356 12.1031C1.9284 17.6227 6.31133 22.0781 11.7089 22.0781C15.1846 22.0781 18.2376 20.2313 19.988 17.4445C20.0657 17.3203 19.9788 17.1563 19.8349 17.1563ZM21.8664 11.8523L18.6237 9.22735C18.5026 9.12891 18.3267 9.21797 18.3267 9.37501V11.1563H11.1513C11.0507 11.1563 10.9685 11.2406 10.9685 11.3438V12.6563C10.9685 12.7594 11.0507 12.8438 11.1513 12.8438H18.3267V14.625C18.3267 14.782 18.5049 14.8711 18.6237 14.7727L21.8664 12.1477C21.8882 12.1301 21.9059 12.1077 21.9181 12.0821C21.9302 12.0565 21.9365 12.0285 21.9365 12C21.9365 11.9715 21.9302 11.9435 21.9181 11.9179C21.9059 11.8923 21.8882 11.8699 21.8664 11.8523Z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
                <div class="relative flex items-center space-x-2 pr-6">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 group-hover:text-slate-900">
                        <path d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" />
                    </svg>
                    <span class="absolute -top-3 left-3 flex items-center justify-center h-6 p-2 rounded-full bg-red-600 text-sm truncate">3</span>
                </div>
            </ng-template>
            <!-- Menu Button -->
            <button class="md:hidden" (click)="toggleMenu()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" 
                class="size-7 text-white"
                *ngIf="!isVisible">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
                <svg class="size-7 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                    *ngIf="isVisible">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>

    <div 
        [ngClass]="[isVisible ? 'translate-x-0' : 'translate-x-full']"
        class="flex flex-col ransition-all duration-300 ease-in-out fixed right-0 top-16 w-full h-full max-w-xs shadow-md bg-white rounded-l-xl border-t-2 border-l-2 p-5">
        <a class="flex items-center space-x-2" href="/" 
            *ngIf="!user; else loggedInMobileTemplate">
            <span>Prijava</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                <path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
            </svg>                      
        </a>
        <ng-template #loggedInMobileTemplate>
            <div class="flex items-center space-x-2 justify-between group">
                <a class="flex items-center space-x-2 group transition-all duration-200" href="/prijava">
                    <svg class="size-6" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                    </svg>
                    <div clas="flex flex-col">
                        <span class="font-semibold text-sm line-clamp-1">{{user.name}}</span>
                        <span class="text-xs line-clamp-1">{{user.email}}</span>
                    </div>
                </a>
                <button>
                    <svg class="text-teal-500 h-6 w-6 " fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.8349 17.1563H18.2284C18.1187 17.1563 18.0159 17.2055 17.9473 17.2922C17.7874 17.4914 17.616 17.6836 17.4355 17.8664C16.6971 18.6245 15.8225 19.2286 14.8601 19.6453C13.863 20.0773 12.7913 20.2989 11.7089 20.2969C10.6143 20.2969 9.55396 20.0766 8.55764 19.6453C7.59519 19.2286 6.72061 18.6245 5.98227 17.8664C5.2426 17.1109 4.6528 16.2155 4.24555 15.2297C3.82279 14.2078 3.61027 13.1227 3.61027 12C3.61027 10.8773 3.82508 9.79219 4.24555 8.77032C4.65231 7.7836 5.2373 6.89532 5.98227 6.1336C6.72723 5.37188 7.5933 4.77188 8.55764 4.35469C9.55396 3.92344 10.6143 3.70313 11.7089 3.70313C12.8035 3.70313 13.8638 3.9211 14.8601 4.35469C15.8244 4.77188 16.6905 5.37188 17.4355 6.1336C17.616 6.31876 17.7851 6.51094 17.9473 6.70782C18.0159 6.79454 18.121 6.84375 18.2284 6.84375H19.8349C19.9788 6.84375 20.068 6.67969 19.988 6.55547C18.2353 3.76172 15.1686 1.9125 11.6837 1.92188C6.2085 1.93594 1.81871 6.49454 1.87356 12.1031C1.9284 17.6227 6.31133 22.0781 11.7089 22.0781C15.1846 22.0781 18.2376 20.2313 19.988 17.4445C20.0657 17.3203 19.9788 17.1563 19.8349 17.1563ZM21.8664 11.8523L18.6237 9.22735C18.5026 9.12891 18.3267 9.21797 18.3267 9.37501V11.1563H11.1513C11.0507 11.1563 10.9685 11.2406 10.9685 11.3438V12.6563C10.9685 12.7594 11.0507 12.8438 11.1513 12.8438H18.3267V14.625C18.3267 14.782 18.5049 14.8711 18.6237 14.7727L21.8664 12.1477C21.8882 12.1301 21.9059 12.1077 21.9181 12.0821C21.9302 12.0565 21.9365 12.0285 21.9365 12C21.9365 11.9715 21.9302 11.9435 21.9181 11.9179C21.9059 11.8923 21.8882 11.8699 21.8664 11.8523Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
        </ng-template>
        <hr class="mt-5">
        <div class="flex flex-col">
            <a
                class="flex items-center justify-between text-slate-900 font-semibold transition-all duration-200 pt-2 pb-2 border-b hover:bg-teal-50"
                [href]="route.href"
                *ngFor="let route of routes">
                <span class="text-sm">{{route.name}}</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                </svg>
            </a>
        </div>
    </div>
</nav>
